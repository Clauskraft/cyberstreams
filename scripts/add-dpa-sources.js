#!/usr/bin/env node
import { saveAuthorizedSources } from "../lib/authorizedSourceRepository.js";

// Data Protection Authorities (DPAs) - EU institutions and Member States
// Where available, include RSS endpoints; otherwise include primary news/press URLs
const dpaSources = [
  {
    id: "dpa_dk_datatilsynet",
    name: "Datatilsynet (DK)",
    domain: "datatilsynet.dk",
    sourceType: "dpa",
    rssUrl: "https://www.datatilsynet.dk/rss".replace("\n", ""),
    apiUrl: null,
    credibilityScore: 99,
    timelinessScore: 85,
    accuracyScore: 99,
    geography: ["DK"],
    languages: ["da"],
    verified: true,
    priority: "critical",
  },
  {
    id: "eu_edpb",
    name: "European Data Protection Board (EDPB)",
    domain: "edpb.europa.eu",
    sourceType: "dpa",
    rssUrl: "https://edpb.europa.eu/news/news_en?format=rss",
    apiUrl: null,
    credibilityScore: 99,
    timelinessScore: 85,
    accuracyScore: 99,
    geography: ["EU"],
    languages: ["en"],
    verified: true,
    priority: "critical",
  },
  {
    id: "eu_edps",
    name: "European Data Protection Supervisor (EDPS)",
    domain: "edps.europa.eu",
    sourceType: "dpa",
    rssUrl: "https://edps.europa.eu/press-publications/press-news/rss_en",
    apiUrl: null,
    credibilityScore: 99,
    timelinessScore: 85,
    accuracyScore: 99,
    geography: ["EU"],
    languages: ["en"],
    verified: true,
    priority: "critical",
  },
  {
    id: "fr_cnil",
    name: "CNIL (FR)",
    domain: "cnil.fr",
    sourceType: "dpa",
    rssUrl: "https://www.cnil.fr/fr/rss.xml",
    apiUrl: null,
    credibilityScore: 98,
    timelinessScore: 85,
    accuracyScore: 98,
    geography: ["FR"],
    languages: ["fr"],
    verified: true,
    priority: "high",
  },
  {
    id: "es_aepd",
    name: "AEPD (ES)",
    domain: "aepd.es",
    sourceType: "dpa",
    rssUrl: "https://www.aepd.es/es/rss.xml",
    apiUrl: null,
    credibilityScore: 98,
    timelinessScore: 85,
    accuracyScore: 98,
    geography: ["ES"],
    languages: ["es"],
    verified: true,
    priority: "high",
  },
  {
    id: "it_garante",
    name: "Garante Privacy (IT)",
    domain: "garanteprivacy.it",
    sourceType: "dpa",
    rssUrl: "https://www.garanteprivacy.it/rss/-/journal/rss/27489",
    apiUrl: null,
    credibilityScore: 98,
    timelinessScore: 80,
    accuracyScore: 98,
    geography: ["IT"],
    languages: ["it"],
    verified: true,
    priority: "high",
  },
  {
    id: "nl_ap",
    name: "Autoriteit Persoonsgegevens (NL)",
    domain: "autoriteitpersoonsgegevens.nl",
    sourceType: "dpa",
    rssUrl: "https://autoriteitpersoonsgegevens.nl/rss.xml",
    apiUrl: null,
    credibilityScore: 98,
    timelinessScore: 80,
    accuracyScore: 98,
    geography: ["NL"],
    languages: ["nl"],
    verified: true,
    priority: "high",
  },
  {
    id: "de_bfdi",
    name: "BfDI (DE)",
    domain: "bfdi.bund.de",
    sourceType: "dpa",
    rssUrl:
      "https://www.bfdi.bund.de/SiteGlobals/Functions/RSSFeed/RSSNewsfeed/RSSNewsfeed_BfDI.xml",
    apiUrl: null,
    credibilityScore: 98,
    timelinessScore: 80,
    accuracyScore: 98,
    geography: ["DE"],
    languages: ["de"],
    verified: true,
    priority: "high",
  },
  {
    id: "se_imy",
    name: "IMY (SE)",
    domain: "imy.se",
    sourceType: "dpa",
    rssUrl: "https://www.imy.se/rss/nyheter/",
    apiUrl: null,
    credibilityScore: 97,
    timelinessScore: 80,
    accuracyScore: 97,
    geography: ["SE"],
    languages: ["sv"],
    verified: true,
    priority: "medium",
  },
  {
    id: "fi_tietosuoja",
    name: "Tietosuojavaltuutetun toimisto (FI)",
    domain: "tietosuoja.fi",
    sourceType: "dpa",
    rssUrl: "https://tietosuoja.fi/en/rss",
    apiUrl: null,
    credibilityScore: 97,
    timelinessScore: 80,
    accuracyScore: 97,
    geography: ["FI"],
    languages: ["fi", "sv", "en"],
    verified: true,
    priority: "medium",
  },
  {
    id: "ie_dpc",
    name: "Data Protection Commission (IE)",
    domain: "dataprotection.ie",
    sourceType: "dpa",
    rssUrl: "https://www.dataprotection.ie/rss.xml",
    apiUrl: null,
    credibilityScore: 98,
    timelinessScore: 85,
    accuracyScore: 98,
    geography: ["IE"],
    languages: ["en"],
    verified: true,
    priority: "high",
  },
  {
    id: "pl_uodo",
    name: "UODO (PL)",
    domain: "uodo.gov.pl",
    sourceType: "dpa",
    rssUrl: "https://uodo.gov.pl/pl/rss/aktualnosci",
    apiUrl: null,
    credibilityScore: 96,
    timelinessScore: 80,
    accuracyScore: 96,
    geography: ["PL"],
    languages: ["pl"],
    verified: true,
    priority: "medium",
  },
  {
    id: "be_apd_gba",
    name: "APD-GBA (BE)",
    domain: "apd-gba.be",
    sourceType: "dpa",
    rssUrl: "https://www.autoriteprotectiondonnees.be/rss.xml",
    apiUrl: null,
    credibilityScore: 96,
    timelinessScore: 80,
    accuracyScore: 96,
    geography: ["BE"],
    languages: ["fr", "nl"],
    verified: true,
    priority: "medium",
  },
  {
    id: "at_dsb",
    name: "DSB (AT)",
    domain: "dsb.gv.at",
    sourceType: "dpa",
    rssUrl: null,
    apiUrl: "https://www.dsb.gv.at/aktuelles.html",
    credibilityScore: 96,
    timelinessScore: 75,
    accuracyScore: 96,
    geography: ["AT"],
    languages: ["de"],
    verified: true,
    priority: "medium",
  },
  {
    id: "lu_cnpd",
    name: "CNPD (LU)",
    domain: "cnpd.public.lu",
    sourceType: "dpa",
    rssUrl: "https://cnpd.public.lu/en/actualites/_jcr_content/par/rss.rss",
    apiUrl: null,
    credibilityScore: 96,
    timelinessScore: 75,
    accuracyScore: 96,
    geography: ["LU"],
    languages: ["fr", "en"],
    verified: true,
    priority: "medium",
  },
  {
    id: "gr_hdpa",
    name: "Hellenic DPA (GR)",
    domain: "dpa.gr",
    sourceType: "dpa",
    rssUrl: "https://www.dpa.gr/rss.xml",
    apiUrl: null,
    credibilityScore: 96,
    timelinessScore: 75,
    accuracyScore: 96,
    geography: ["GR"],
    languages: ["el"],
    verified: true,
    priority: "medium",
  },
  {
    id: "pt_cnpd",
    name: "CNPD (PT)",
    domain: "cnpd.pt",
    sourceType: "dpa",
    rssUrl: "https://www.cnpd.pt/feed/",
    apiUrl: null,
    credibilityScore: 96,
    timelinessScore: 75,
    accuracyScore: 96,
    geography: ["PT"],
    languages: ["pt"],
    verified: true,
    priority: "medium",
  },
  {
    id: "cz_uoou",
    name: "UOOU (CZ)",
    domain: "uoou.cz",
    sourceType: "dpa",
    rssUrl: "https://www.uoou.cz/rss.xml",
    apiUrl: null,
    credibilityScore: 95,
    timelinessScore: 75,
    accuracyScore: 95,
    geography: ["CZ"],
    languages: ["cs"],
    verified: true,
    priority: "medium",
  },
  {
    id: "sk_uoou",
    name: "UOOU (SK)",
    domain: "dataprotection.gov.sk",
    sourceType: "dpa",
    rssUrl: null,
    apiUrl: "https://www.dataprotection.gov.sk/uoou/sk/aktuality",
    credibilityScore: 95,
    timelinessScore: 75,
    accuracyScore: 95,
    geography: ["SK"],
    languages: ["sk"],
    verified: true,
    priority: "medium",
  },
  {
    id: "lt_vdai",
    name: "VDAI (LT)",
    domain: "ada.lt",
    sourceType: "dpa",
    rssUrl: "https://ada.lt/en/rss/",
    apiUrl: null,
    credibilityScore: 95,
    timelinessScore: 75,
    accuracyScore: 95,
    geography: ["LT"],
    languages: ["lt", "en"],
    verified: true,
    priority: "medium",
  },
  {
    id: "lv_dvi",
    name: "DVI (LV)",
    domain: "dvi.gov.lv",
    sourceType: "dpa",
    rssUrl: null,
    apiUrl: "https://www.dvi.gov.lv/",
    credibilityScore: 95,
    timelinessScore: 75,
    accuracyScore: 95,
    geography: ["LV"],
    languages: ["lv"],
    verified: true,
    priority: "medium",
  },
  {
    id: "ee_aki",
    name: "AKI (EE)",
    domain: "aki.ee",
    sourceType: "dpa",
    rssUrl: "https://www.aki.ee/en/rss.xml",
    apiUrl: null,
    credibilityScore: 95,
    timelinessScore: 75,
    accuracyScore: 95,
    geography: ["EE"],
    languages: ["et", "en"],
    verified: true,
    priority: "medium",
  },
];

async function main() {
  try {
    await saveAuthorizedSources(dpaSources);
    console.log(`Seeded ${dpaSources.length} DPA sources`);
    process.exit(0);
  } catch (err) {
    console.error("Failed to seed DPA sources", err);
    process.exit(1);
  }
}

main();
